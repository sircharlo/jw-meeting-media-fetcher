<!DOCTYPE html>
<html>

<head>
  <title>JW Meeting and Media Fetcher</title>
  <link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="node_modules/select2/dist/css/select2.min.css">
</head>

<body>
  <div class="card">
    <div class="card-body">
      <div class="form-group row">
        <label for="usr" class="col col-form-label">Language code:</label>
        <div class="col">
          <input type="text" class="form-control" id="lang" required hidden />
          <select id="langSelect">
            <option disabled selected value hidden></option>
          </select>
        </div>
      </div>
      <div class="form-group row">
        <label for="mwDay" class="col col-form-label">Midweek meeting day:</label>
        <div class="col">
          <select class="form-control" id="mwDay" required>
            <option disabled selected value hidden></option>
            <option value="0">Monday</option>
            <option value="1">Tuesday</option>
            <option value="2">Wednesday</option>
            <option value="3">Thursday</option>
            <option value="4">Friday</option>
            <option value="5">Saturday</option>
            <option value="6">Sunday</option>
          </select>
        </div>
      </div>
      <div class="form-group row">
        <label for="weDay" class="col col-form-label">Weekend meeting day:</label>
        <div class="col">
          <select class="form-control" id="weDay" required>
            <option disabled selected value hidden></option>
            <option value="0">Monday</option>
            <option value="1">Tuesday</option>
            <option value="2">Wednesday</option>
            <option value="3">Thursday</option>
            <option value="4">Friday</option>
            <option value="5">Saturday</option>
            <option value="6">Sunday</option>
          </select>
        </div>
      </div>
      <div class="form-group row">
        <div class="col">
        </div>
        <div class="col">
          <button type="button" class="btn btn-primary" id="mediaSync">Update media</button>
        </div>
      </div>
      <hr/>
      <div class="alert alert-info" id="mainStatus" role="alert">
        Main progress
      </div>
      <div class="progress" id="mainProgress">
        <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="0" style="width:0%">
          0% Complete
        </div>
      </div>
      <hr/>
      <div class="alert alert-info" id="filesDownloadedStatus" role="alert">
        Remote files
      </div>
      <div class="progress" id="filesDownloadedProgress">
        <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="0" style="width:0%">
          ...
        </div>
      </div>
      <hr/>
      <div class="alert alert-info" id="filesSavedStatus" role="alert">
        Local file copies:
      </div>
      <div class="progress" id="filesSavedProgress">
        <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="0" style="width:0%">
          ...
        </div>
      </div>
      <hr/>
      <div class="alert alert-info" id="dbStatus" role="alert">
        Internal publication lookups:
      </div>
      <div class="progress" id="dbProgress">
        <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="0" style="width:0%">
          ...
        </div>
      </div>
      <hr/>
      <span id="version" class="badge badge-secondary"></span>
    </div>
  </div>
  <script>
    window.$ = window.jQuery = require('jquery');
    window.popperjs = require('popper.js');
    window.Bootstrap = require('bootstrap');
    window.select2 = require('select2')(jQuery);
  </script>

  <script>
  $.getJSON( "https://www.jw.org/en/languages/", null,
          function (jsonData) {
              $.each(jsonData.languages, function (index, lang) {
                  $('#langSelect').append($("<option>", {
                    value: lang.langcode,
                    text: lang.name
                  }));
              });
              $('#langSelect').val($('#lang').val());
              $('#langSelect').select2();
              //.typeahead( { source: langs.names } );
          } );
          $("#version").html("Version " + window.require('electron').remote.app.getVersion());
  </script>
  <script src="./media-updater.js"></script>
</body>

</html>
